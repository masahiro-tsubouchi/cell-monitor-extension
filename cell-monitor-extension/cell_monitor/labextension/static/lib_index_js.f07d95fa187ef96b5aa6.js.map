{"version":3,"file":"lib_index_js.f07d95fa187ef96b5aa6.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACuD;AACY;AAC6B;AACzF;AACP;AACA;AACA;AACA,wCAAwC;AACxC,gDAAgD;AAChD;AACA,sBAAsB,oDAAY;AAClC;AACA;AACA;AACA,yBAAyB,oDAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,iEAAe;AACvB,oBAAoB,OAAO;AAC3B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,gCAAgC,0BAA0B;AAC1D,aAAa;AACb;AACA;AACA,oFAAoF,kBAAkB;AACtG;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,aAAa,IAAI,cAAc;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mCAAmC;AACvD;AACA;AACA,yBAAyB,oDAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iEAAyB,2FAA2F,kHAAkH;AAClP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mCAAmC;AACvD;AACA,yBAAyB,oDAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iEAAyB,6FAA6F,yBAAyB;AAC3J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB,oBAAoB;AACpC;AACA,YAAY,8DAAY,6BAA6B,iBAAiB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,YAAY,8DAAY,uCAAuC,iBAAiB;AAChF;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qDAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+DAAa;AAC5C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mCAAmC;AACnD;AACA,qBAAqB,oDAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,mCAAmC;AACnD;AACA,qBAAqB,oDAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mBAAmB;AACnD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oDAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,0CAA0C;AAC1C,qCAAqC;;;;;;;;;;;;;;;;;AClhBwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,sBAAsB,oDAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2DAAmB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5SA;AACA;AACA;AACA;AACoD;AACe;AACX;AACO;AAC/D;AACyD;AACN;AAC0B;AACG;AAChF;AACA;AACA;AACA;AACA;AACA,sBAAsB,oDAAY;AAClC;AACA;AACA,mCAAmC,kEAAe;AAClD,2CAA2C,sFAAuB;AAClE,gCAAgC,4DAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC,YAAY,gDAAY,aAAa,mBAAmB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAY,+CAA+C,iBAAiB;AAC5F;AACA;AACA;AACA;AACA,YAAY,iEAAyB;AACrC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+DAAa;AAClD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sDAAsD,YAAY;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAY,qBAAqB,iBAAiB,KAAK,iBAAiB;AACxF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAY,qBAAqB,iBAAiB,KAAK,iBAAiB;AACpF;AACA;AACA;AACA,gBAAgB,8CAA8C;AAC9D;AACA,YAAY,8DAAY,+BAA+B,kBAAkB,MAAM,iBAAiB;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kEAAgB,EAAE,yEAAgB,EAAE,8DAAS;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;;;;;;;;ACxHzB;AACA;AACA;AACA;AAC0B;AAC0B;AACqC;AACrB;AACpE;AACA;AACA;AACA;AACO;AACP;AACA,sBAAsB,oDAAY;AAClC;AACA;AACA;AACA;AACA,2CAA2C,6EAAuB;AAClE;AACA;AACA,6BAA6B,mDAAY;AACzC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,mCAAmC,mDAAY;AAC/C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,8BAA8B,0BAA0B,GAAG,gBAAgB,GAAG,QAAQ;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA,qCAAqC,4CAA4C;AACjF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,yBAAyB;AACvG;AACA,oBAAoB,8DAAY,6BAA6B,aAAa;AAC1E;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mEAA2B,kEAAkE,gDAAgD;AACjK;AACA;AACA;AACA,oBAAoB,0DAAkB,iDAAiD,QAAQ,GAAG,WAAW;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,wBAAwB;AAC3G;AACA;AACA;AACA;AACA;AACA,oBAAoB,mEAA2B,gEAAgE,+CAA+C;AAC9J;AACA;AACA;AACA,oBAAoB,0DAAkB,+CAA+C,QAAQ,GAAG,WAAW;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtMA;AACA;AACA;AACA;AAC+C;AACxC;AACP;AACA,sBAAsB,2DAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,GAAG,OAAO,GAAG,6BAA6B;AACpF;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACoD;AACZ;AACxC,eAAe,qDAAY;AAC3B;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,gBAAgB,8EAA8E;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB,IAAI,aAAa,QAAQ,SAAS,EAAE,cAAc;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,gBAAgB,8DAAY;AAC5B;AACA;AACA,gBAAgB,8DAAY;AAC5B;AACA;AACA,gBAAgB,8DAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,8BAA8B;AAC9B;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA,0BAA0B,eAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,WAAW;AACnF;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qBAAqB;AACrB,KAAK;AACL;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;;;;;ACtQA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mBAAmB,GAAG,MAAM,IAAI,UAAU;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB,GAAG,QAAQ;AACrD,SAAS;AACT;AACA;AACA;AACO;AACP;AACO;AACP;AACA;;;;;;;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL","sources":["webpack://cell-monitor/./lib/core/EventManager.js","webpack://cell-monitor/./lib/core/SettingsManager.js","webpack://cell-monitor/./lib/index.js","webpack://cell-monitor/./lib/services/DataTransmissionService.js","webpack://cell-monitor/./lib/services/LoadDistributionService.js","webpack://cell-monitor/./lib/utils/errorHandler.js","webpack://cell-monitor/./lib/utils/logger.js","webpack://cell-monitor/./lib/utils/uuid.js"],"sourcesContent":["/**\n * ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚¯ãƒ©ã‚¹\n * JupyterLabã®ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã—ã€å­¦ç¿’é€²æ—ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ãƒ»é€ä¿¡\n */\nimport { NotebookActions } from '@jupyterlab/notebook';\nimport { Notification, ToolbarButton } from '@jupyterlab/apputils';\nimport { generateUUID, createLogger, handleCellProcessingError, handleUIError } from '../utils';\nexport class EventManager {\n    constructor(notebookTracker, settingsManager, dataTransmissionService) {\n        this.executionHandlerRegistered = false;\n        this.helpSession = new Map();\n        this.helpIntervals = new Map(); // Phase 2.3: ç¶™ç¶šHELPé€ä¿¡\n        this.helpSessionTimestamps = new Map(); // Phase 2.3: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç®¡ç†\n        this.processedCells = new Map();\n        this.logger = createLogger('EventManager');\n        this.notebookTracker = notebookTracker;\n        this.settingsManager = settingsManager;\n        this.dataTransmissionService = dataTransmissionService;\n        this.sessionId = generateUUID();\n    }\n    /**\n     * ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’åˆæœŸåŒ–\n     */\n    initialize() {\n        this.setupNotebookTracking();\n        this.setupExecutionTracking();\n    }\n    /**\n     * ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆã®è¿½è·¡è¨­å®š\n     */\n    setupNotebookTracking() {\n        this.notebookTracker.widgetAdded.connect((sender, widget) => {\n            const notebookPath = widget.context.path || 'unknown';\n            this.sendNotebookEvent('notebook_opened', notebookPath);\n            // å…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚ˆã†ã«å„ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’è¿½åŠ \n            this.addHelpButtonToNotebook(widget);\n        });\n    }\n    /**\n     * ã‚»ãƒ«å®Ÿè¡Œã‚¤ãƒ™ãƒ³ãƒˆã®è¿½è·¡è¨­å®šï¼ˆå…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜æ–¹å¼ï¼‰\n     */\n    setupExecutionTracking() {\n        if (this.executionHandlerRegistered) {\n            return;\n        }\n        // å…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜æ–¹å¼ã§NotebookActions.executed.connectã‚’ä½¿ç”¨\n        NotebookActions.executed.connect((_, args) => {\n            const { cell } = args;\n            this.processCellExecution(cell);\n        });\n        this.executionHandlerRegistered = true;\n        this.logger.info('Cell execution handler registered (once)');\n    }\n    /**\n     * ã‚»ãƒ«å®Ÿè¡Œã‚’å‡¦ç†ï¼ˆå…ƒã®ã‚³ãƒ¼ãƒ‰ã¨å®Œå…¨ã«åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰\n     */\n    processCellExecution(cell) {\n        var _a, _b;\n        try {\n            if (!cell || !cell.model)\n                return;\n            // å‡¦ç†é–‹å§‹æ™‚é–“ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ç”¨ï¼‰\n            const startTime = performance.now();\n            const cellId = cell.model.id;\n            // é‡è¤‡å‡¦ç†é˜²æ­¢æ©Ÿæ§‹ï¼ˆå…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ï¼‰\n            const currentTime = Date.now();\n            const lastTime = this.processedCells.get(cellId) || 0;\n            const rawTimeDiff = currentTime - lastTime;\n            const timeDiff = Math.max(0, Math.min(rawTimeDiff, 300000)); // 5åˆ†ä¸Šé™\n            // ç•°å¸¸å€¤æ¤œå‡ºã¨ãƒ­ã‚°å‡ºåŠ›\n            if (rawTimeDiff > 300000) {\n                this.logger.warn('Abnormal timestamp detected', {\n                    currentTime,\n                    lastTime,\n                    rawDiff: rawTimeDiff\n                });\n            }\n            this.logger.perfDebug('Cell execution processing', {\n                cellId,\n                timeSinceLastProcessing: timeDiff,\n                alreadyProcessed: this.processedCells.has(cellId),\n                memoryUsage: `${this.processedCells.size} / 50 max`\n            });\n            // 500msä»¥å†…ã®é‡è¤‡å‡¦ç†ã‚’é˜²æ­¢ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹ï¼‰\n            if (timeDiff < 500 && this.processedCells.has(cellId)) {\n                this.logger.debug('Skipping duplicate cell execution processing', { cellId, timeDiff });\n                return;\n            }\n            // å‡¦ç†æ¸ˆã¿ãƒãƒ¼ã‚¯ã‚’æ›´æ–°\n            this.processedCells.set(cellId, currentTime);\n            // è»½é‡ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼ˆå—è¬›ç”ŸPCã®è² è·æœ€å°åŒ–ï¼‰\n            if (this.processedCells.size >= 50) { // 100â†’50ã«å‰Šæ¸›\n                // é‡ã„ã‚½ãƒ¼ãƒˆå‡¦ç†ã‚’é¿ã‘ã€æœ€åˆã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ï¼ˆFIFOæ–¹å¼ï¼‰\n                const firstKey = this.processedCells.keys().next().value;\n                if (firstKey) {\n                    this.processedCells.delete(firstKey);\n                    this.logger.debug('Memory cleanup: removed oldest cell entry', {\n                        removedKey: firstKey,\n                        currentSize: this.processedCells.size\n                    });\n                }\n            }\n            // å®‰å…¨ã«ã‚»ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹æ–¹æ³•\n            let code = '';\n            try {\n                if (cell.model.sharedModel && cell.model.sharedModel.source) {\n                    code = cell.model.sharedModel.source;\n                }\n                else if (cell.model.value && cell.model.value.text) {\n                    code = cell.model.value.text;\n                }\n                else if (cell.editor && cell.editor.model && cell.editor.model.value) {\n                    code = cell.editor.model.value.text;\n                }\n            }\n            catch (error) {\n                this.logger.warn('Failed to get cell code:', error);\n            }\n            // Get notebook widget from cell\n            const notebookWidget = this.notebookTracker.currentWidget;\n            if (!notebookWidget)\n                return;\n            // Get notebook path\n            const notebookPath = ((_a = notebookWidget.context) === null || _a === void 0 ? void 0 : _a.path) || '';\n            // Get cell index and type\n            let cellIndex = undefined;\n            let cellType = undefined;\n            try {\n                // ã‚»ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—\n                const cells = notebookWidget.content.widgets;\n                for (let i = 0; i < cells.length; i++) {\n                    if (cells[i].model.id === cellId) {\n                        cellIndex = i;\n                        break;\n                    }\n                }\n                // ã‚»ãƒ«ã®ã‚¿ã‚¤ãƒ—ã‚’å–å¾—\n                if (cell.model.type) {\n                    cellType = cell.model.type;\n                }\n            }\n            catch (error) {\n                this.logger.warn('Failed to get cell index or type:', error);\n            }\n            // Get execution results\n            let hasError = false;\n            let resultText = '';\n            let errorMessage = '';\n            let executionCount = undefined;\n            if (cell.outputArea) {\n                // å®Ÿè¡Œã‚«ã‚¦ãƒ³ãƒˆã‚’å–å¾—\n                try {\n                    executionCount = cell.model.executionCount || undefined;\n                }\n                catch (error) {\n                    this.logger.warn('Failed to get execution count:', error);\n                }\n                const outputs = cell.outputArea.model.toJSON();\n                for (const output of outputs) {\n                    if (output.output_type === 'error') {\n                        hasError = true;\n                        errorMessage = `${output.ename}: ${output.evalue}`;\n                        resultText = errorMessage;\n                        break;\n                    }\n                    else if (output.output_type === 'execute_result' || output.output_type === 'display_data') {\n                        if (output.data) {\n                            if (output.data['text/plain']) {\n                                resultText = output.data['text/plain'];\n                            }\n                        }\n                    }\n                }\n            }\n            // å®Ÿè¡Œæ™‚é–“ã®è¨ˆæ¸¬\n            const endTime = performance.now();\n            const executionDurationMs = Math.round(endTime - startTime);\n            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—\n            const { emailAddress, userName, teamName } = this.settingsManager.getUserInfo();\n            // æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«\n            const progressData = {\n                eventId: generateUUID(),\n                eventType: 'cell_executed',\n                eventTime: new Date().toISOString(),\n                emailAddress,\n                teamName,\n                userName,\n                sessionId: this.sessionId,\n                notebookPath,\n                cellId,\n                cellIndex,\n                cellType: cellType,\n                code,\n                executionCount,\n                hasError,\n                errorMessage: hasError ? errorMessage : undefined,\n                result: resultText,\n                executionDurationMs\n            };\n            // ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡\n            this.dataTransmissionService.sendProgressData([progressData]);\n        }\n        catch (error) {\n            handleCellProcessingError(error instanceof Error ? error : new Error(String(error)), 'Cell execution processing', { cellId: (_b = cell === null || cell === void 0 ? void 0 : cell.model) === null || _b === void 0 ? void 0 : _b.id });\n        }\n    }\n    /**\n     * ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡\n     */\n    async sendNotebookEvent(eventType, notebookPath) {\n        try {\n            const { emailAddress, userName, teamName } = this.settingsManager.getUserInfo();\n            const progressData = {\n                eventId: generateUUID(),\n                eventType,\n                eventTime: new Date().toISOString(),\n                emailAddress,\n                teamName,\n                userName,\n                sessionId: this.sessionId,\n                notebookPath\n            };\n            await this.dataTransmissionService.sendProgressData([progressData]);\n        }\n        catch (error) {\n            handleCellProcessingError(error instanceof Error ? error : new Error(String(error)), 'Notebook event transmission', { eventType, notebookPath });\n        }\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ï¼ˆPhase 2.3: ç¶™ç¶šHELPé€ä¿¡å¯¾å¿œï¼‰\n     */\n    startHelpSession() {\n        const currentWidget = this.notebookTracker.currentWidget;\n        if (!currentWidget) {\n            this.logger.warn('No notebook widget available for help session start');\n            return;\n        }\n        const notebookPath = currentWidget.context.path || 'unknown';\n        // æ—¢ã«ç¶™ç¶šé€ä¿¡ä¸­ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„\n        if (this.helpIntervals.has(notebookPath)) {\n            this.logger.debug('Help session already active', {\n                notebookPath: notebookPath.substring(0, 20) + '...'\n            });\n            return;\n        }\n        // å³åº§ã«æœ€åˆã®HELPã‚’é€ä¿¡\n        this.sendHelpEvent(notebookPath);\n        // 10ç§’é–“éš”ã§ã®ç¶™ç¶šé€ä¿¡ã‚’é–‹å§‹\n        const interval = setInterval(() => {\n            this.sendHelpEvent(notebookPath);\n        }, 10000);\n        this.helpIntervals.set(notebookPath, interval);\n        this.helpSession.set(notebookPath, true);\n        this.helpSessionTimestamps.set(notebookPath, Date.now());\n        this.logger.info('Continuous help session started', {\n            notebookPath: notebookPath.substring(0, 20) + '...',\n            intervalId: 'set'\n        });\n        // UIé€šçŸ¥\n        const { showNotifications } = this.settingsManager.getNotificationSettings();\n        if (showNotifications) {\n            Notification.info('ç¶™ç¶šãƒ˜ãƒ«ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã—ãŸ', { autoClose: 2000 });\n        }\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åœæ­¢ï¼ˆPhase 2.3: ãƒãƒ«ã‚¯ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¯¾å¿œï¼‰\n     */\n    stopHelpSession() {\n        const currentWidget = this.notebookTracker.currentWidget;\n        if (!currentWidget) {\n            this.logger.warn('No notebook widget available for help session stop');\n            return;\n        }\n        const notebookPath = currentWidget.context.path || 'unknown';\n        // ç¶™ç¶šé€ä¿¡ã‚’åœæ­¢\n        const interval = this.helpIntervals.get(notebookPath);\n        if (interval) {\n            clearInterval(interval);\n            this.helpIntervals.delete(notebookPath);\n            this.logger.debug('Continuous help sending stopped', {\n                notebookPath: notebookPath.substring(0, 20) + '...'\n            });\n        }\n        // æœ€çµ‚ã®help_stopã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡\n        this.sendHelpStopEvent(notebookPath);\n        // Phase 2.3: ãƒãƒ«ã‚¯ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿè¡Œï¼ˆå¤§å¹…ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ï¼‰\n        this.bulkCleanupOldSessions();\n        this.helpSession.set(notebookPath, false);\n        // UIé€šçŸ¥\n        const { showNotifications } = this.settingsManager.getNotificationSettings();\n        if (showNotifications) {\n            Notification.success('ãƒ˜ãƒ«ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³åœæ­¢ï¼ˆãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿè¡Œï¼‰', { autoClose: 2000 });\n        }\n        this.logger.info('Help session stopped with bulk cleanup', {\n            notebookPath: notebookPath.substring(0, 20) + '...',\n            remainingSessions: this.helpSession.size\n        });\n    }\n    /**\n     * ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ï¼ˆå…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜æ–¹å¼ï¼‰\n     */\n    addHelpButtonToNotebook(widget) {\n        if (widget.toolbar) {\n            try {\n                // æ—¢å­˜ã®ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤ï¼ˆé‡è¤‡é˜²æ­¢ï¼‰\n                const existingHelpButton = widget.toolbar.node.querySelector('.jp-help-button');\n                if (existingHelpButton) {\n                    this.logger.debug('Removing existing help button to prevent duplicates');\n                    existingHelpButton.remove();\n                }\n                const helpButton = this.createHelpButton();\n                widget.toolbar.addItem('help-button', helpButton);\n                this.logger.info('Help button added to notebook toolbar');\n            }\n            catch (error) {\n                handleUIError(error instanceof Error ? error : new Error(String(error)), 'Help button creation', 'ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚');\n            }\n        }\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’ä½œæˆã™ã‚‹ï¼ˆDOMå®‰å…¨ç‰ˆï¼‰\n     */\n    createHelpButton() {\n        this.logger.debug('Creating help button with DOM-safe implementation...');\n        const helpButton = new ToolbarButton({\n            className: 'jp-help-button jp-ToolbarButton',\n            onClick: () => {\n                this.logger.debug('Help button clicked!');\n                this.toggleHelpState(helpButton);\n            },\n            tooltip: 'ãƒ˜ãƒ«ãƒ—è¦è«‹ãƒœã‚¿ãƒ³ - ã‚¯ãƒªãƒƒã‚¯ã§ON/OFFåˆ‡æ›¿',\n            label: 'ğŸ†˜ è¬›å¸«ã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹',\n            iconClass: 'jp-help-button__icon',\n            enabled: true\n        });\n        this.logger.debug('ToolbarButton created with persistent onClick handler');\n        return helpButton;\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒˆã‚°ãƒ«ï¼‰\n     */\n    toggleHelpState(button) {\n        const currentWidget = this.notebookTracker.currentWidget;\n        if (!currentWidget) {\n            Notification.warning('ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ãŒé–‹ã‹ã‚Œã¦ã„ã¾ã›ã‚“');\n            return;\n        }\n        // UIçŠ¶æ…‹ã§åˆ¤å®šï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿï¼‰\n        const isCurrentlyActive = button.node.classList.contains('jp-help-button--active');\n        this.logger.debug('toggleHelpState called, currently active:', isCurrentlyActive);\n        if (!isCurrentlyActive) {\n            // OFF â†’ ON: å³åº§ã«UIåˆ‡æ›¿ + èƒŒæ™¯ã§ã‚µãƒ¼ãƒãƒ¼é€šä¿¡\n            this.activateHelpButton(button);\n            this.startHelpSession(); // awaitå‰Šé™¤ã€ã‚¨ãƒ©ãƒ¼ã¯å†…éƒ¨å‡¦ç†\n        }\n        else {\n            // ON â†’ OFF: å³åº§ã«UIåˆ‡æ›¿ + èƒŒæ™¯ã§ã‚µãƒ¼ãƒãƒ¼é€šä¿¡\n            this.deactivateHelpButton(button);\n            this.stopHelpSession(); // awaitå‰Šé™¤ã€ã‚¨ãƒ©ãƒ¼ã¯å†…éƒ¨å‡¦ç†\n        }\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã«åˆ‡ã‚Šæ›¿ãˆï¼ˆDOMå®‰å…¨ç‰ˆï¼‰\n     */\n    activateHelpButton(button) {\n        // CSSçŠ¶æ…‹å¤‰æ›´ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¿æŒï¼‰\n        button.node.classList.add('jp-help-button--active');\n        // ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿å¤‰æ›´ï¼ˆDOMæ§‹é€ ä¿æŒï¼‰\n        const textElement = button.node.querySelector('.jp-ToolbarButtonComponent-label');\n        if (textElement) {\n            textElement.textContent = 'ğŸ†˜ ãƒ˜ãƒ«ãƒ—è¦è«‹ä¸­...';\n        }\n        // ã‚¿ã‚¤ãƒˆãƒ«å±æ€§ã§ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—æ›´æ–°\n        button.node.setAttribute('title', 'ãƒ˜ãƒ«ãƒ—è¦è«‹ä¸­ - ã‚¯ãƒªãƒƒã‚¯ã§åœæ­¢');\n        // å†…éƒ¨çŠ¶æ…‹ã‚‚æ›´æ–°\n        const currentWidget = this.notebookTracker.currentWidget;\n        if (currentWidget) {\n            const notebookPath = currentWidget.context.path || 'unknown';\n            this.helpSession.set(notebookPath, true);\n        }\n        this.logger.debug('Help button activated with DOM-safe method');\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã«åˆ‡ã‚Šæ›¿ãˆï¼ˆDOMå®‰å…¨ç‰ˆï¼‰\n     */\n    deactivateHelpButton(button) {\n        // CSSçŠ¶æ…‹å¤‰æ›´ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¿æŒï¼‰\n        button.node.classList.remove('jp-help-button--active');\n        // ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿å¤‰æ›´ï¼ˆDOMæ§‹é€ ä¿æŒï¼‰\n        const textElement = button.node.querySelector('.jp-ToolbarButtonComponent-label');\n        if (textElement) {\n            textElement.textContent = 'ğŸ†˜ è¬›å¸«ã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹';\n        }\n        // ã‚¿ã‚¤ãƒˆãƒ«å±æ€§ã§ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—æ›´æ–°\n        button.node.setAttribute('title', 'ãƒ˜ãƒ«ãƒ—è¦è«‹ãƒœã‚¿ãƒ³ - ã‚¯ãƒªãƒƒã‚¯ã§ON/OFFåˆ‡æ›¿');\n        // å†…éƒ¨çŠ¶æ…‹ã‚‚æ›´æ–°\n        const currentWidget = this.notebookTracker.currentWidget;\n        if (currentWidget) {\n            const notebookPath = currentWidget.context.path || 'unknown';\n            this.helpSession.set(notebookPath, false);\n        }\n        this.logger.debug('Help button deactivated with DOM-safe method');\n    }\n    /**\n     * Phase 2.3: å˜ä¸€HELPé€ä¿¡ï¼ˆç¶™ç¶šé€ä¿¡ç”¨ï¼‰\n     */\n    sendHelpEvent(notebookPath) {\n        const { emailAddress, userName, teamName } = this.settingsManager.getUserInfo();\n        const progressData = {\n            eventId: generateUUID(),\n            eventType: 'help',\n            eventTime: new Date().toISOString(),\n            emailAddress,\n            teamName,\n            userName,\n            sessionId: this.sessionId,\n            notebookPath\n        };\n        // èƒŒæ™¯ã§ã‚µãƒ¼ãƒãƒ¼é€šä¿¡ï¼ˆã‚¨ãƒ©ãƒ¼ã¯å†…éƒ¨å‡¦ç†ã®ã¿ï¼‰\n        this.dataTransmissionService.sendProgressData([progressData])\n            .then(() => {\n            this.logger.debug('Continuous help event sent', {\n                notebookPath: notebookPath.substring(0, 20) + '...'\n            });\n        })\n            .catch((error) => {\n            this.logger.error('Failed to send continuous help event:', error);\n        });\n    }\n    /**\n     * Phase 2.3: HELPåœæ­¢ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡\n     */\n    sendHelpStopEvent(notebookPath) {\n        const { emailAddress, userName, teamName } = this.settingsManager.getUserInfo();\n        const progressData = {\n            eventId: generateUUID(),\n            eventType: 'help_stop',\n            eventTime: new Date().toISOString(),\n            emailAddress,\n            teamName,\n            userName,\n            sessionId: this.sessionId,\n            notebookPath\n        };\n        // èƒŒæ™¯ã§ã‚µãƒ¼ãƒãƒ¼é€šä¿¡\n        this.dataTransmissionService.sendProgressData([progressData])\n            .then(() => {\n            this.logger.debug('Help stop event sent', {\n                notebookPath: notebookPath.substring(0, 20) + '...'\n            });\n        })\n            .catch((error) => {\n            this.logger.error('Failed to send help stop event:', error);\n        });\n    }\n    /**\n     * Phase 2.3: ãƒãƒ«ã‚¯ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆå¤§å¹…ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ï¼‰\n     */\n    bulkCleanupOldSessions() {\n        const now = Date.now();\n        const cutoffTime = now - (30 * 60 * 1000); // 30åˆ†å‰\n        let removedCount = 0;\n        this.logger.debug('Starting bulk cleanup', {\n            totalSessions: this.helpSession.size,\n            cutoffTime: new Date(cutoffTime).toISOString()\n        });\n        // 30åˆ†ä»¥ä¸Šå‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å…¨ã¦å‰Šé™¤\n        for (const [key, timestamp] of this.helpSessionTimestamps.entries()) {\n            if (timestamp < cutoffTime) {\n                this.helpSession.delete(key);\n                this.helpSessionTimestamps.delete(key);\n                // å¯¾å¿œã™ã‚‹intervalã‚‚ç¢ºèªãƒ»å‰Šé™¤\n                const interval = this.helpIntervals.get(key);\n                if (interval) {\n                    clearInterval(interval);\n                    this.helpIntervals.delete(key);\n                }\n                removedCount++;\n            }\n        }\n        // ç·Šæ€¥æ™‚ã®FIFOåˆ¶é™ã‚‚ä½µç”¨ï¼ˆãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•ï¼‰\n        this.emergencyFIFOCleanup();\n        this.logger.info('Bulk cleanup completed', {\n            removedSessions: removedCount,\n            remainingSessions: this.helpSession.size,\n            memoryReduction: `${removedCount * 0.4}MB estimated`\n        });\n    }\n    /**\n     * Phase 2.3: ç·Šæ€¥æ™‚FIFOåˆ¶é™ï¼ˆãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•æ©Ÿèƒ½ï¼‰\n     */\n    emergencyFIFOCleanup() {\n        if (this.helpSession.size >= EventManager.MAX_HELP_SESSIONS) {\n            const firstKey = this.helpSession.keys().next().value;\n            if (firstKey) {\n                this.helpSession.delete(firstKey);\n                this.helpSessionTimestamps.delete(firstKey);\n                const interval = this.helpIntervals.get(firstKey);\n                if (interval) {\n                    clearInterval(interval);\n                    this.helpIntervals.delete(firstKey);\n                }\n                this.logger.debug('Emergency FIFO cleanup executed', {\n                    removedKey: firstKey.substring(0, 10) + '***',\n                    currentSize: this.helpSession.size\n                });\n            }\n        }\n    }\n    /**\n     * æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ï¼ˆPhase 2.3: å…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¼·åŒ–ï¼‰\n     */\n    startNewSession() {\n        // å…¨ã¦ã®ç¶™ç¶šé€ä¿¡ã‚’åœæ­¢\n        for (const [, interval] of this.helpIntervals.entries()) {\n            clearInterval(interval);\n        }\n        this.helpIntervals.clear();\n        this.sessionId = generateUUID();\n        this.helpSession.clear();\n        this.helpSessionTimestamps.clear();\n        this.processedCells.clear();\n        // this.lastProcessedTime = 0;\n        this.logger.info('New session started with full cleanup:', {\n            sessionId: this.sessionId,\n            memoryCleanup: 'complete'\n        });\n    }\n}\n// private lastProcessedTime: number = 0; // å°†æ¥ã®å®Ÿè£…ç”¨ã«æ®‹ã—ã¦ãŠã\nEventManager.MAX_HELP_SESSIONS = 20; // Phase 2.3: ç·Šæ€¥æ™‚FIFOåˆ¶é™\n","import { createLogger, handleSettingsError } from '../utils';\n/**\n * ãƒãƒ¼ãƒ åãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n */\nfunction validateTeamName(teamName) {\n    const pattern = /^ãƒãƒ¼ãƒ ([A-Z]|[1-9][0-9]?)$/;\n    if (!teamName) {\n        return { isValid: false, error: 'ãƒãƒ¼ãƒ åã¯å¿…é ˆã§ã™' };\n    }\n    if (!pattern.test(teamName)) {\n        return {\n            isValid: false,\n            error: 'ãƒãƒ¼ãƒ åã¯ã€Œãƒãƒ¼ãƒ A-Zã€ã¾ãŸã¯ã€Œãƒãƒ¼ãƒ 1-99ã€ã®å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: ãƒãƒ¼ãƒ A, ãƒãƒ¼ãƒ 1, ãƒãƒ¼ãƒ 10ï¼‰'\n        };\n    }\n    return { isValid: true };\n}\n/**\n * è¨­å®šç®¡ç†ã‚¯ãƒ©ã‚¹\n * JupyterLabã®è¨­å®šãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¨é€£æºã—ã¦Cell Monitoræ‹¡å¼µæ©Ÿèƒ½ã®è¨­å®šã‚’ç®¡ç†\n */\nexport class SettingsManager {\n    constructor() {\n        this.settings = null;\n        this.logger = createLogger('SettingsManager');\n        // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ç©º\n    }\n    /**\n     * è¨­å®šã‚’åˆæœŸåŒ–\n     */\n    async initialize(settingRegistry, pluginId) {\n        try {\n            this.settings = await settingRegistry.load(pluginId);\n            // è¨­å®šå¤‰æ›´ã®ç›£è¦–ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n            this.settings.changed.connect(() => {\n                this.validateAndUpdateSettings();\n            });\n            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š\n            this.setupRealtimeValidation(settingRegistry, pluginId);\n            // åˆå›è¨­å®šèª­ã¿è¾¼ã¿\n            this.updateSettingsFromRegistry();\n            this.logger.info('Settings initialized successfully');\n        }\n        catch (error) {\n            handleSettingsError(error instanceof Error ? error : new Error(String(error)), 'Settings initialization', 'è¨­å®šã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ç¶™ç¶šã—ã¾ã™ã€‚');\n        }\n    }\n    /**\n     * è¨­å®šãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰è¨­å®šã‚’æ›´æ–°\n     */\n    updateSettingsFromRegistry() {\n        if (!this.settings)\n            return;\n        try {\n            // è¨­å®šå€¤ã‚’å–å¾—ã—ã¦å†…éƒ¨çŠ¶æ…‹ã‚’æ›´æ–°\n            const serverUrl = this.settings.get('serverUrl').composite;\n            const emailAddress = this.settings.get('emailAddress').composite;\n            const userName = this.settings.get('userName').composite;\n            const teamName = this.settings.get('teamName').composite;\n            const retryAttempts = this.settings.get('retryAttempts').composite;\n            const showNotifications = this.settings.get('showNotifications').composite;\n            // ãƒãƒ¼ãƒ åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n            if (teamName) {\n                const validation = validateTeamName(teamName);\n                if (!validation.isValid) {\n                    this.logger.warn('Invalid team name detected:', validation.error);\n                    // è­¦å‘Šã‚’è¡¨ç¤ºï¼ˆUIå´ã§å‡¦ç†ï¼‰\n                }\n            }\n            this.logger.debug('Settings updated from registry', {\n                serverUrl: serverUrl || 'default',\n                emailAddress: emailAddress || 'student001@example.com',\n                userName: userName || 'Anonymous',\n                teamName: teamName || 'ãƒãƒ¼ãƒ A',\n                retryAttempts,\n                showNotifications\n            });\n        }\n        catch (error) {\n            this.logger.warn('Failed to update settings from registry:', error);\n        }\n    }\n    /**\n     * ç¾åœ¨ã®è¨­å®šã‚’å–å¾—\n     */\n    getSettings() {\n        return this.settings;\n    }\n    /**\n     * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰\n     */\n    getUserInfo() {\n        if (!this.settings) {\n            return {\n                emailAddress: 'student001@example.com',\n                userName: 'Anonymous',\n                teamName: 'ãƒãƒ¼ãƒ A'\n            };\n        }\n        const settingEmailAddress = this.settings.get('emailAddress').composite;\n        const settingUserName = this.settings.get('userName').composite;\n        const settingTeamName = this.settings.get('teamName').composite;\n        // ãƒãƒ¼ãƒ åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n        let validatedTeamName = settingTeamName || 'ãƒãƒ¼ãƒ A';\n        if (settingTeamName) {\n            const validation = validateTeamName(settingTeamName);\n            if (!validation.isValid) {\n                this.logger.warn('Invalid team name, using default:', validation.error);\n                validatedTeamName = 'ãƒãƒ¼ãƒ A'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯\n            }\n        }\n        return {\n            emailAddress: settingEmailAddress || 'student001@example.com',\n            userName: settingUserName || 'Anonymous',\n            teamName: validatedTeamName\n        };\n    }\n    /**\n     * ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š\n     */\n    setupRealtimeValidation(_settingRegistry, _pluginId) {\n        // è¨­å®šã‚¨ãƒ‡ã‚£ã‚¿ã®DOMãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ã®ç›£è¦–\n        // JupyterLabã®è¨­å®šUIãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã«å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç›£è¦–\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.type === 'childList') {\n                    this.enhanceTeamNameInput();\n                }\n            });\n        });\n        // DOMå…¨ä½“ã‚’ç›£è¦–ï¼ˆè¨­å®šUIãŒå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ï¼‰\n        observer.observe(document.body, {\n            childList: true,\n            subtree: true\n        });\n    }\n    /**\n     * ãƒãƒ¼ãƒ åå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å¼·åŒ–\n     */\n    enhanceTeamNameInput() {\n        // JupyterLabã®è¨­å®šUIã§ãƒãƒ¼ãƒ åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ¢ã™\n        const teamNameInputs = document.querySelectorAll('input[data-setting-path*=\"teamName\"]');\n        teamNameInputs.forEach((input) => {\n            if (input instanceof HTMLInputElement && !input.dataset.enhanced) {\n                input.dataset.enhanced = 'true';\n                // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…¥åŠ›ç›£è¦–\n                input.addEventListener('input', (event) => {\n                    const target = event.target;\n                    const value = target.value;\n                    if (value) {\n                        const validation = validateTeamName(value);\n                        if (validation.isValid) {\n                            // æœ‰åŠ¹ãªå…¥åŠ›ã®å ´åˆ\n                            target.style.borderColor = '#4caf50';\n                            target.style.backgroundColor = '#f0f8f0';\n                            this.clearValidationMessage(target);\n                        }\n                        else {\n                            // ç„¡åŠ¹ãªå…¥åŠ›ã®å ´åˆ\n                            target.style.borderColor = '#f44336';\n                            target.style.backgroundColor = '#fdf0f0';\n                            this.showValidationMessage(target, validation.error || '');\n                        }\n                    }\n                    else {\n                        // ç©ºã®å ´åˆã¯ãƒªã‚»ãƒƒãƒˆ\n                        target.style.borderColor = '';\n                        target.style.backgroundColor = '';\n                        this.clearValidationMessage(target);\n                    }\n                });\n                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n                input.addEventListener('focus', (event) => {\n                    const target = event.target;\n                    this.showHelpMessage(target);\n                });\n                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¤–ã‚Œæ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n                input.addEventListener('blur', (event) => {\n                    const target = event.target;\n                    this.clearHelpMessage(target);\n                });\n            }\n        });\n    }\n    /**\n     * ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º\n     */\n    showValidationMessage(input, message) {\n        var _a;\n        this.clearValidationMessage(input);\n        const errorDiv = document.createElement('div');\n        errorDiv.className = 'team-name-validation-error';\n        errorDiv.style.cssText = `\n      color: #f44336;\n      font-size: 12px;\n      margin-top: 4px;\n      padding: 4px;\n      background-color: #ffebee;\n      border-radius: 4px;\n      border-left: 3px solid #f44336;\n    `;\n        errorDiv.textContent = message;\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(errorDiv, input.nextSibling);\n    }\n    /**\n     * ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢\n     */\n    clearValidationMessage(input) {\n        var _a;\n        const existingError = (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.querySelector('.team-name-validation-error');\n        if (existingError) {\n            existingError.remove();\n        }\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º\n     */\n    showHelpMessage(input) {\n        var _a;\n        this.clearHelpMessage(input);\n        const helpDiv = document.createElement('div');\n        helpDiv.className = 'team-name-help-message';\n        helpDiv.style.cssText = `\n      color: #1976d2;\n      font-size: 12px;\n      margin-top: 4px;\n      padding: 4px;\n      background-color: #e3f2fd;\n      border-radius: 4px;\n      border-left: 3px solid #1976d2;\n    `;\n        helpDiv.innerHTML = `\n      <strong>ãƒãƒ¼ãƒ åã®å½¢å¼:</strong><br>\n      â€¢ ãƒãƒ¼ãƒ Aã€œZ (ä¾‹: ãƒãƒ¼ãƒ A, ãƒãƒ¼ãƒ B)<br>\n      â€¢ ãƒãƒ¼ãƒ 1ã€œ99 (ä¾‹: ãƒãƒ¼ãƒ 1, ãƒãƒ¼ãƒ 10)\n    `;\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(helpDiv, input.nextSibling);\n    }\n    /**\n     * ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢\n     */\n    clearHelpMessage(input) {\n        var _a;\n        const existingHelp = (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.querySelector('.team-name-help-message');\n        if (existingHelp) {\n            existingHelp.remove();\n        }\n    }\n    /**\n     * è¨­å®šå¤‰æ›´æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ›´æ–°\n     */\n    validateAndUpdateSettings() {\n        this.updateSettingsFromRegistry();\n        // è¨­å®šUIæ›´æ–°ã®ãŸã‚ã®å°‘ã—é…å»¶ã—ãŸå‡¦ç†\n        setTimeout(() => {\n            this.enhanceTeamNameInput();\n        }, 100);\n    }\n    /**\n     * ãƒãƒ¼ãƒ åãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆå¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼‰\n     */\n    validateTeamName(teamName) {\n        return validateTeamName(teamName);\n    }\n    /**\n     * ã‚µãƒ¼ãƒãƒ¼URLã‚’å–å¾—\n     */\n    getServerUrl() {\n        if (!this.settings) {\n            return 'http://localhost:8000/api/v1/events';\n        }\n        return this.settings.get('serverUrl').composite || 'http://localhost:8000/api/v1/events';\n    }\n    /**\n     * ãƒªãƒˆãƒ©ã‚¤å›æ•°ã‚’å–å¾—\n     */\n    getRetryAttempts() {\n        if (!this.settings) {\n            return 3;\n        }\n        return this.settings.get('retryAttempts').composite || 3;\n    }\n    /**\n     * é€šçŸ¥è¨­å®šã‚’å–å¾—\n     */\n    getNotificationSettings() {\n        var _a;\n        if (!this.settings) {\n            return {\n                showNotifications: false,\n                animationEnabled: false\n            };\n        }\n        const showNotifications = this.settings.get('showNotifications').composite;\n        const animationEnabled = (_a = this.settings.get('animationEnabled')) === null || _a === void 0 ? void 0 : _a.composite;\n        return {\n            showNotifications: showNotifications !== undefined ? showNotifications : false,\n            animationEnabled: animationEnabled !== undefined ? animationEnabled : false\n        };\n    }\n}\n","/**\n * Cell Monitor JupyterLab Extension\n * ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç‰ˆ - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n */\nimport { ILabShell } from '@jupyterlab/application';\nimport { ToolbarButton, Notification } from '@jupyterlab/apputils';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\n// æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆ\nimport { SettingsManager } from './core/SettingsManager';\nimport { EventManager } from './core/EventManager';\nimport { DataTransmissionService } from './services/DataTransmissionService';\nimport { createLogger, handleInitializationError, errorHandler } from './utils';\n// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è­˜åˆ¥å­\nconst PLUGIN_ID = 'cell-monitor:plugin';\n// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹\nclass CellMonitorPlugin {\n    constructor(app, notebookTracker, settingRegistry, labShell) {\n        this.logger = createLogger('CellMonitorPlugin');\n        this.app = app;\n        // ä¾å­˜é–¢ä¿‚ã‚’æ³¨å…¥ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ\n        this.settingsManager = new SettingsManager();\n        this.dataTransmissionService = new DataTransmissionService(this.settingsManager);\n        this.eventManager = new EventManager(notebookTracker, this.settingsManager, this.dataTransmissionService);\n        this.initialize(settingRegistry, labShell);\n    }\n    /**\n     * ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆæœŸåŒ–\n     */\n    async initialize(settingRegistry, labShell) {\n        try {\n            this.logger.info('Initializing Cell Monitor extension...');\n            // è¨­å®šç®¡ç†ã®åˆæœŸåŒ–\n            await this.settingsManager.initialize(settingRegistry, PLUGIN_ID);\n            // è¨­å®šå¤‰æ›´ã®ç›£è¦–ï¼ˆãƒãƒ¼ãƒ åãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰\n            this.setupSettingsValidation();\n            // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®è¨­å®šã‚’æ›´æ–°\n            const { showNotifications } = this.settingsManager.getNotificationSettings();\n            errorHandler.configure({ showNotifications });\n            // ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã®åˆæœŸåŒ–\n            this.eventManager.initialize();\n            // UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆæœŸåŒ–\n            this.setupToolbarButtons(labShell);\n            // æˆåŠŸé€šçŸ¥\n            if (showNotifications) {\n                Notification.success('Cell Monitor Extension Activated', { autoClose: 2000 });\n            }\n            this.logger.info('Cell Monitor extension activated successfully');\n        }\n        catch (error) {\n            handleInitializationError(error instanceof Error ? error : new Error(String(error)), 'Plugin initialization');\n            throw error; // JupyterLabã«æ‹¡å¼µæ©Ÿèƒ½ã®åˆæœŸåŒ–å¤±æ•—ã‚’çŸ¥ã‚‰ã›ã‚‹\n        }\n    }\n    /**\n     * ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãƒœã‚¿ãƒ³ã®è¨­å®š\n     */\n    setupToolbarButtons(labShell) {\n        // æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒœã‚¿ãƒ³ã®ã¿ã‚’ä½œæˆï¼ˆãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã¯å„ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã«å€‹åˆ¥è¿½åŠ ï¼‰\n        const newSessionButton = new ToolbarButton({\n            label: 'æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³',\n            tooltip: 'æ–°ã—ã„å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã™',\n            onClick: () => this.startNewSession(),\n            className: 'jp-new-session-button'\n        });\n        // ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«è¿½åŠ \n        this.app.shell.add(newSessionButton, 'top', { rank: 1001 });\n        this.logger.debug('New session button added to toolbar');\n    }\n    /**\n     * è¨­å®šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–è¨­å®š\n     */\n    setupSettingsValidation() {\n        const settings = this.settingsManager.getSettings();\n        if (!settings)\n            return;\n        // è¨­å®šå¤‰æ›´ã‚’ç›£è¦–\n        settings.changed.connect(() => {\n            const userInfo = this.settingsManager.getUserInfo();\n            const validation = this.settingsManager.validateTeamName(userInfo.teamName);\n            if (!validation.isValid) {\n                // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®é€šçŸ¥\n                Notification.error(`ãƒãƒ¼ãƒ åè¨­å®šã‚¨ãƒ©ãƒ¼: ${validation.error}`, { autoClose: 5000 });\n                this.logger.error('Team name validation failed:', validation.error);\n            }\n        });\n    }\n    /**\n     * æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é–‹å§‹\n     */\n    startNewSession() {\n        this.logger.info('Starting new learning session');\n        // ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹å‰ã«ãƒãƒ¼ãƒ åã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n        const userInfo = this.settingsManager.getUserInfo();\n        const validation = this.settingsManager.validateTeamName(userInfo.teamName);\n        if (!validation.isValid) {\n            Notification.error(`ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹å¤±æ•—: ${validation.error}`, { autoClose: 5000 });\n            return;\n        }\n        this.eventManager.startNewSession();\n        const { showNotifications: showSessionNotifications } = this.settingsManager.getNotificationSettings();\n        if (showSessionNotifications) {\n            Notification.success(`æ–°ã—ã„å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã—ãŸ (${userInfo.teamName})`, { autoClose: 2000 });\n        }\n    }\n}\n/**\n * JupyterLabæ‹¡å¼µæ©Ÿèƒ½ã®å®šç¾©\n */\nconst extension = {\n    id: PLUGIN_ID,\n    description: 'JupyterLab extension for cell execution monitoring',\n    autoStart: true,\n    requires: [INotebookTracker, ISettingRegistry, ILabShell],\n    activate: async (app, notebookTracker, settingRegistry, labShell) => {\n        // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã¨åˆæœŸåŒ–\n        new CellMonitorPlugin(app, notebookTracker, settingRegistry, labShell);\n    }\n};\n;\nexport default extension;\n","/**\n * ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹\n * APIã¸ã®ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã€å†è©¦è¡Œå‡¦ç†ã€é€šçŸ¥è¡¨ç¤ºã‚’æ‹…å½“\n */\nimport axios from 'axios';\nimport { Notification } from '@jupyterlab/apputils';\nimport { createLogger, handleDataTransmissionError, handleNetworkError } from '../utils';\nimport { LoadDistributionService } from './LoadDistributionService';\n/**\n * ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹\n * å­¦ç¿’é€²æ—ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¬ã‚¬ã‚·ãƒ¼ã‚»ãƒ«å®Ÿè¡Œãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡\n */\nexport class DataTransmissionService {\n    constructor(settingsManager) {\n        this.logger = createLogger('DataTransmissionService');\n        this.connectionPoolCleanupInterval = null;\n        // Phase 2.2: HTTPé‡è¤‡é€ä¿¡é˜²æ­¢\n        this.pendingRequests = new Map();\n        this.settingsManager = settingsManager;\n        this.loadDistributionService = new LoadDistributionService(settingsManager);\n        // HTTPæ¥ç¶šãƒ—ãƒ¼ãƒ«è¨­å®šï¼ˆPhase 2.1: æ¥ç¶šãƒ—ãƒ¼ãƒ«æœ€é©åŒ–ï¼‰\n        // ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã¯ Connection ãƒ˜ãƒƒãƒ€ãƒ¼ã¯è‡ªå‹•ç®¡ç†ã•ã‚Œã‚‹ãŸã‚é™¤å¤–\n        this.axiosInstance = axios.create({\n            timeout: 8000,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            maxRedirects: 3,\n            validateStatus: (status) => status < 500\n        });\n        // ãƒ¬ã‚¬ã‚·ãƒ¼ç”¨æ¥ç¶šãƒ—ãƒ¼ãƒ«\n        this.legacyAxiosInstance = axios.create({\n            timeout: 8000,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            maxRedirects: 3,\n            validateStatus: (status) => status < 500\n        });\n        // æ¥ç¶šãƒ—ãƒ¼ãƒ«ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—è¨­å®š\n        this.setupConnectionPoolCleanup();\n    }\n    setupConnectionPoolCleanup() {\n        // 30ç§’ã”ã¨ã«æ¥ç¶šãƒ—ãƒ¼ãƒ«ã®çŠ¶æ³ã‚’ãƒ­ã‚°å‡ºåŠ›ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ï¼‰\n        this.connectionPoolCleanupInterval = setInterval(() => {\n            this.logger.debug('HTTP connection pool status check - automatic cleanup by browser');\n        }, 30000);\n    }\n    /**\n     * ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆå¿…è¦ã«å¿œã˜ã¦å‘¼ã³å‡ºã—ï¼‰\n     */\n    dispose() {\n        if (this.connectionPoolCleanupInterval) {\n            clearInterval(this.connectionPoolCleanupInterval);\n            this.connectionPoolCleanupInterval = null;\n        }\n        // Phase 2.2: æœªå®Œäº†ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n        this.pendingRequests.clear();\n        this.logger.debug('DataTransmissionService disposed', {\n            pendingRequestsCleared: true\n        });\n    }\n    /**\n     * å­¦ç¿’é€²æ—ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ï¼ˆè² è·åˆ†æ•£æ©Ÿèƒ½ä»˜ã + é‡è¤‡é€ä¿¡é˜²æ­¢ï¼‰\n     */\n    async sendProgressData(data) {\n        if (data.length === 0)\n            return;\n        // Phase 2.2: é‡è¤‡é€ä¿¡é˜²æ­¢æ©Ÿèƒ½ã‚’é©ç”¨\n        for (const event of data) {\n            await this.sendSingleEventWithDeduplication(event);\n        }\n    }\n    /**\n     * Phase 2.2: é‡è¤‡é€ä¿¡é˜²æ­¢ä»˜ãå˜ä¸€ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡\n     */\n    async sendSingleEventWithDeduplication(event) {\n        var _a;\n        // é‡è¤‡ãƒã‚§ãƒƒã‚¯ç”¨ã‚­ãƒ¼ï¼ˆã‚»ãƒ«ID + ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ— + ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—åˆ†å˜ä½ï¼‰\n        const timeKey = Math.floor(Date.now() / 60000); // 1åˆ†å˜ä½ã§ã‚­ãƒ¼ç”Ÿæˆ\n        const requestKey = `${event.cellId || 'unknown'}-${event.eventType}-${timeKey}`;\n        // æ—¢ã«åŒã˜ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€²è¡Œä¸­ãªã‚‰å¾…æ©Ÿ\n        if (this.pendingRequests.has(requestKey)) {\n            this.logger.debug('Duplicate request detected, waiting...', {\n                cellId: ((_a = event.cellId) === null || _a === void 0 ? void 0 : _a.substring(0, 8)) + '...',\n                eventType: event.eventType,\n                requestKey: requestKey.substring(0, 20) + '...'\n            });\n            await this.pendingRequests.get(requestKey);\n            return;\n        }\n        // æ–°è¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œ\n        const promise = this.sendSingleEventInternal([event]);\n        this.pendingRequests.set(requestKey, promise);\n        promise.finally(() => {\n            this.pendingRequests.delete(requestKey);\n        });\n        await promise;\n    }\n    /**\n     * Phase 2.2: å˜ä¸€ã‚¤ãƒ™ãƒ³ãƒˆã®å†…éƒ¨é€ä¿¡å‡¦ç†ï¼ˆè² è·åˆ†æ•£è€ƒæ…®ï¼‰\n     */\n    async sendSingleEventInternal(data) {\n        // è² è·åˆ†æ•£è¨­å®šãŒæœ‰åŠ¹ãªå ´åˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æœ‰åŠ¹ï¼‰\n        let useLoadDistribution = true; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤\n        try {\n            const settings = this.settingsManager.getSettings();\n            if (settings && settings.get) {\n                const loadDistSetting = settings.get('useLoadDistribution');\n                if (loadDistSetting && loadDistSetting.composite !== undefined) {\n                    useLoadDistribution = loadDistSetting.composite;\n                }\n            }\n        }\n        catch (error) {\n            this.logger.debug('Failed to get load distribution setting, using default', error);\n        }\n        if (useLoadDistribution) {\n            // è² è·åˆ†æ•£ä»˜ãé€ä¿¡\n            await this.loadDistributionService.sendWithLoadDistribution(data, (data) => this.sendProgressDataInternal(data));\n        }\n        else {\n            // å¾“æ¥é€šã‚Šã®é€ä¿¡\n            await this.sendProgressDataInternal(data);\n        }\n    }\n    /**\n     * å†…éƒ¨é€ä¿¡æ©Ÿèƒ½ï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰\n     */\n    async sendProgressDataInternal(data) {\n        const { showNotifications } = this.settingsManager.getNotificationSettings();\n        this.logger.debug('Sending progress data', {\n            eventCount: data.length,\n            showNotifications,\n            events: data.map(d => ({ eventType: d.eventType, eventId: d.eventId }))\n        });\n        const serverUrl = this.settingsManager.getServerUrl();\n        const maxRetries = this.settingsManager.getRetryAttempts();\n        let retries = 0;\n        while (retries <= maxRetries) {\n            try {\n                // Phase 2.1: æ¥ç¶šãƒ—ãƒ¼ãƒ«ä»˜ãaxiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨\n                await this.axiosInstance.post(serverUrl, data);\n                this.logger.info('Student progress data sent successfully', { eventCount: data.length });\n                if (data.length > 0 && showNotifications) {\n                    Notification.info(`Learning data sent (${data.length} events)`, {\n                        autoClose: 3000\n                    });\n                }\n                break;\n            }\n            catch (error) {\n                const errorObj = error instanceof Error ? error : new Error(String(error));\n                if (retries >= maxRetries) {\n                    handleDataTransmissionError(errorObj, 'Progress data transmission - max retries exceeded', { eventCount: data.length, retryAttempt: retries });\n                    break;\n                }\n                else {\n                    handleNetworkError(errorObj, `Progress data transmission - retry ${retries}/${maxRetries}`, undefined);\n                    // Wait before retrying (exponential backoff)\n                    await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, retries - 1)));\n                }\n                retries++;\n            }\n        }\n    }\n    /**\n     * ãƒ¬ã‚¬ã‚·ãƒ¼ã‚»ãƒ«å®Ÿè¡Œãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ï¼ˆå¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ï¼‰\n     */\n    async sendLegacyData(data) {\n        if (data.length === 0)\n            return;\n        const serverUrl = this.settingsManager.getServerUrl();\n        const legacyUrl = serverUrl.replace('student-progress', 'cell-monitor');\n        const maxRetries = this.settingsManager.getRetryAttempts();\n        let retries = 0;\n        while (retries <= maxRetries) {\n            try {\n                // Phase 2.1: ãƒ¬ã‚¬ã‚·ãƒ¼ç”¨æ¥ç¶šãƒ—ãƒ¼ãƒ«ä»˜ãaxiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨\n                await this.legacyAxiosInstance.post(legacyUrl, data);\n                this.logger.info('Legacy cell execution data sent successfully', { itemCount: data.length });\n                break;\n            }\n            catch (error) {\n                const errorObj = error instanceof Error ? error : new Error(String(error));\n                if (retries >= maxRetries) {\n                    handleDataTransmissionError(errorObj, 'Legacy data transmission - max retries exceeded', { itemCount: data.length, retryAttempt: retries });\n                    break;\n                }\n                else {\n                    handleNetworkError(errorObj, `Legacy data transmission - retry ${retries}/${maxRetries}`);\n                }\n                retries++;\n                // Wait before retrying (exponential backoff)\n                await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, retries - 1)));\n            }\n        }\n    }\n}\n","/**\n * è² è·åˆ†æ•£ã‚µãƒ¼ãƒ“ã‚¹\n * å­¦ç”ŸIDãƒ™ãƒ¼ã‚¹ã®ä¸€æ„ãªé…å»¶ã«ã‚ˆã‚Šã€ã‚µãƒ¼ãƒãƒ¼è² è·ã‚’åˆ†æ•£\n */\nimport { createLogger } from '../utils/logger';\nexport class LoadDistributionService {\n    constructor(_settingsManager) {\n        this.logger = createLogger('LoadDistributionService');\n        // settingsManagerã¯å°†æ¥ã®æ‹¡å¼µã§ä½¿ç”¨äºˆå®š\n    }\n    /**\n     * è² è·åˆ†æ•£ä»˜ããƒ‡ãƒ¼ã‚¿é€ä¿¡\n     */\n    async sendWithLoadDistribution(data, originalSendFunction) {\n        var _a, _b;\n        if (data.length === 0)\n            return;\n        // å‹•çš„é…å»¶è¨ˆç®—ï¼ˆã‚»ãƒ«ID + ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ï¼‰\n        const userEmail = ((_a = data[0]) === null || _a === void 0 ? void 0 : _a.emailAddress) || '';\n        const cellId = ((_b = data[0]) === null || _b === void 0 ? void 0 : _b.cellId) || '';\n        const timestamp = Date.now();\n        const combinedSeed = `${userEmail}-${cellId}-${Math.floor(timestamp / 1000)}`;\n        const dynamicHash = this.hashString(combinedSeed);\n        const baseDelay = (dynamicHash % 2000) + 200; // 0.2-2.2ç§’ã§å‹•çš„å¤‰å‹•\n        this.logger.debug('Load distribution delay calculated', {\n            userEmail: userEmail.substring(0, 5) + '***', // ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·\n            delay: baseDelay,\n            eventCount: data.length\n        });\n        // é…å»¶å®Ÿè¡Œ\n        await new Promise(resolve => setTimeout(resolve, baseDelay));\n        // æ—¢å­˜ã®é€ä¿¡æ©Ÿèƒ½ã‚’å®Ÿè¡Œï¼ˆæŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ä»˜ãï¼‰\n        await originalSendFunction(data);\n    }\n    /**\n     * æ–‡å­—åˆ—ãƒãƒƒã‚·ãƒ¥é–¢æ•°ï¼ˆä¸€æ„æ€§ç¢ºä¿ï¼‰\n     */\n    hashString(str) {\n        if (!str)\n            return 0;\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = ((hash << 5) - hash) + char;\n            hash = hash & hash; // 32bitæ•´æ•°ã«å¤‰æ›\n        }\n        return Math.abs(hash);\n    }\n}\n","/**\n * Error Handling Utilities for Cell Monitor Extension\n * Provides centralized error handling, reporting, and user-friendly messages\n */\nimport { Notification } from '@jupyterlab/apputils';\nimport { createLogger } from './logger';\nconst logger = createLogger('ErrorHandler');\n/**\n * Error severity levels\n */\nexport var ErrorSeverity;\n(function (ErrorSeverity) {\n    ErrorSeverity[\"LOW\"] = \"low\";\n    ErrorSeverity[\"MEDIUM\"] = \"medium\";\n    ErrorSeverity[\"HIGH\"] = \"high\";\n    ErrorSeverity[\"CRITICAL\"] = \"critical\";\n})(ErrorSeverity || (ErrorSeverity = {}));\n/**\n * Error categories for better classification\n */\nexport var ErrorCategory;\n(function (ErrorCategory) {\n    ErrorCategory[\"NETWORK\"] = \"network\";\n    ErrorCategory[\"SETTINGS\"] = \"settings\";\n    ErrorCategory[\"CELL_PROCESSING\"] = \"cell_processing\";\n    ErrorCategory[\"UI\"] = \"ui\";\n    ErrorCategory[\"DATA_TRANSMISSION\"] = \"data_transmission\";\n    ErrorCategory[\"INITIALIZATION\"] = \"initialization\";\n})(ErrorCategory || (ErrorCategory = {}));\nclass ErrorHandler {\n    constructor() {\n        this.config = {\n            showNotifications: true,\n            logToConsole: true,\n            reportToServer: false\n        };\n    }\n    /**\n     * Update error handler configuration\n     */\n    configure(config) {\n        this.config = { ...this.config, ...config };\n    }\n    /**\n     * Main error handling method\n     */\n    handle(errorInfo) {\n        const { error, category, severity, context, userMessage, shouldNotifyUser, metadata } = errorInfo;\n        // Log the error with appropriate level based on severity\n        this.logError(error, category, severity, context, metadata);\n        // Show user notification if needed\n        if (shouldNotifyUser && this.config.showNotifications) {\n            this.showUserNotification(userMessage || this.getDefaultUserMessage(category, severity), severity);\n        }\n        // Report to server if configured (future implementation)\n        if (this.config.reportToServer) {\n            this.reportError(errorInfo);\n        }\n    }\n    /**\n     * Log error with appropriate level\n     */\n    logError(error, category, severity, context, metadata) {\n        const logMessage = `[${category.toUpperCase()}] ${context ? `${context}: ` : ''}${error.message}`;\n        const logData = {\n            error: error.stack || error.message,\n            category,\n            severity,\n            context,\n            ...metadata\n        };\n        switch (severity) {\n            case ErrorSeverity.CRITICAL:\n            case ErrorSeverity.HIGH:\n                logger.error(logMessage, logData);\n                break;\n            case ErrorSeverity.MEDIUM:\n                logger.warn(logMessage, logData);\n                break;\n            case ErrorSeverity.LOW:\n                logger.info(logMessage, logData);\n                break;\n        }\n    }\n    /**\n     * Show user-friendly notifications\n     */\n    showUserNotification(message, severity) {\n        const options = { autoClose: this.getNotificationAutoClose(severity) };\n        switch (severity) {\n            case ErrorSeverity.CRITICAL:\n            case ErrorSeverity.HIGH:\n                Notification.error(message, options);\n                break;\n            case ErrorSeverity.MEDIUM:\n                Notification.warning(message, options);\n                break;\n            case ErrorSeverity.LOW:\n                Notification.info(message, options);\n                break;\n        }\n    }\n    /**\n     * Get auto-close duration based on severity\n     */\n    getNotificationAutoClose(severity) {\n        switch (severity) {\n            case ErrorSeverity.CRITICAL:\n                return 0; // Don't auto-close critical errors\n            case ErrorSeverity.HIGH:\n                return 10000; // 10 seconds\n            case ErrorSeverity.MEDIUM:\n                return 5000; // 5 seconds\n            case ErrorSeverity.LOW:\n                return 3000; // 3 seconds\n        }\n    }\n    /**\n     * Get default user message based on category and severity\n     */\n    getDefaultUserMessage(category, severity) {\n        const severityPrefix = severity === ErrorSeverity.CRITICAL || severity === ErrorSeverity.HIGH\n            ? 'é‡è¦: ' : '';\n        switch (category) {\n            case ErrorCategory.NETWORK:\n                return `${severityPrefix}ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;\n            case ErrorCategory.SETTINGS:\n                return `${severityPrefix}è¨­å®šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚æ‹¡å¼µæ©Ÿèƒ½ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;\n            case ErrorCategory.CELL_PROCESSING:\n                return `${severityPrefix}ã‚»ãƒ«å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚`;\n            case ErrorCategory.UI:\n                return `${severityPrefix}ç”»é¢è¡¨ç¤ºã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ç”»é¢ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚`;\n            case ErrorCategory.DATA_TRANSMISSION:\n                return `${severityPrefix}ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚è‡ªå‹•çš„ã«å†è©¦è¡Œã—ã¾ã™ã€‚`;\n            case ErrorCategory.INITIALIZATION:\n                return `${severityPrefix}æ‹¡å¼µæ©Ÿèƒ½ã®åˆæœŸåŒ–ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚JupyterLabã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚`;\n            default:\n                return `${severityPrefix}äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚`;\n        }\n    }\n    /**\n     * Report error to server (future implementation)\n     */\n    reportError(errorInfo) {\n        // TODO: Implement server error reporting\n        logger.debug('Error reporting to server not yet implemented', { errorInfo });\n    }\n}\n// Export singleton instance\nexport const errorHandler = new ErrorHandler();\n/**\n * Convenience functions for common error handling patterns\n */\n/**\n * Handle network errors\n */\nexport const handleNetworkError = (error, context, userMessage) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.NETWORK,\n        severity: ErrorSeverity.MEDIUM,\n        context,\n        userMessage,\n        shouldNotifyUser: true\n    });\n};\n/**\n * Handle settings errors\n */\nexport const handleSettingsError = (error, context, userMessage) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.SETTINGS,\n        severity: ErrorSeverity.HIGH,\n        context,\n        userMessage,\n        shouldNotifyUser: true\n    });\n};\n/**\n * Handle cell processing errors\n */\nexport const handleCellProcessingError = (error, context, metadata) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.CELL_PROCESSING,\n        severity: ErrorSeverity.LOW,\n        context,\n        shouldNotifyUser: false, // Don't spam users for cell processing errors\n        metadata\n    });\n};\n/**\n * Handle critical initialization errors\n */\nexport const handleInitializationError = (error, context) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.INITIALIZATION,\n        severity: ErrorSeverity.CRITICAL,\n        context,\n        shouldNotifyUser: true\n    });\n};\n/**\n * Handle UI errors\n */\nexport const handleUIError = (error, context, userMessage) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.UI,\n        severity: ErrorSeverity.MEDIUM,\n        context,\n        userMessage,\n        shouldNotifyUser: true\n    });\n};\n/**\n * Handle data transmission errors\n */\nexport const handleDataTransmissionError = (error, context, metadata) => {\n    errorHandler.handle({\n        error,\n        category: ErrorCategory.DATA_TRANSMISSION,\n        severity: ErrorSeverity.MEDIUM,\n        context,\n        shouldNotifyUser: true,\n        metadata\n    });\n};\n/**\n * Async error wrapper for promises\n */\nexport const withErrorHandling = (promise, category, severity = ErrorSeverity.MEDIUM, context) => {\n    return promise.catch(error => {\n        errorHandler.handle({\n            error: error instanceof Error ? error : new Error(String(error)),\n            category,\n            severity,\n            context,\n            shouldNotifyUser: severity >= ErrorSeverity.MEDIUM\n        });\n        throw error; // Re-throw to maintain promise chain behavior\n    });\n};\n/**\n * Sync error wrapper for functions\n */\nexport const withSyncErrorHandling = (fn, category, severity = ErrorSeverity.MEDIUM, context) => {\n    try {\n        return fn();\n    }\n    catch (error) {\n        errorHandler.handle({\n            error: error instanceof Error ? error : new Error(String(error)),\n            category,\n            severity,\n            context,\n            shouldNotifyUser: severity >= ErrorSeverity.MEDIUM\n        });\n        return undefined;\n    }\n};\n","/**\n * Logger utility for Cell Monitor Extension\n * Provides environment-based log level control and consistent logging interface\n */\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"ERROR\"] = 0] = \"ERROR\";\n    LogLevel[LogLevel[\"WARN\"] = 1] = \"WARN\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"DEBUG\"] = 3] = \"DEBUG\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor(config = {}) {\n        // Detect development mode (JupyterLab extension context)\n        this.isDevelopment = this.detectDevelopmentMode();\n        this.config = {\n            level: this.isDevelopment ? LogLevel.DEBUG : LogLevel.ERROR,\n            prefix: '[CellMonitor]',\n            enabledInProduction: false,\n            ...config\n        };\n    }\n    detectDevelopmentMode() {\n        // Check for development indicators\n        try {\n            // JupyterLab development mode usually has certain debug flags\n            if (typeof window !== 'undefined') {\n                // Check for development mode indicators\n                return (window.location.hostname === 'localhost' ||\n                    window.location.hostname === '127.0.0.1' ||\n                    document.querySelector('[data-jupyter-widgets-version]') !== null);\n            }\n            // For browser environments, assume development if on localhost\n            return false;\n        }\n        catch (_a) {\n            // Fallback to production mode if detection fails\n            return false;\n        }\n    }\n    shouldLog(level) {\n        if (!this.isDevelopment && !this.config.enabledInProduction) {\n            // In production, only allow ERROR level unless explicitly enabled\n            return level === LogLevel.ERROR;\n        }\n        return level <= this.config.level;\n    }\n    formatMessage(level, message, ...args) {\n        const timestamp = new Date().toISOString().split('T')[1].split('.')[0];\n        const prefix = `${this.config.prefix}[${level}][${timestamp}]`;\n        return [prefix, message, ...args];\n    }\n    error(message, ...args) {\n        if (this.shouldLog(LogLevel.ERROR)) {\n            console.error(...this.formatMessage('ERROR', message, ...args));\n        }\n    }\n    warn(message, ...args) {\n        if (this.shouldLog(LogLevel.WARN)) {\n            console.warn(...this.formatMessage('WARN', message, ...args));\n        }\n    }\n    info(message, ...args) {\n        if (this.shouldLog(LogLevel.INFO)) {\n            console.info(...this.formatMessage('INFO', message, ...args));\n        }\n    }\n    debug(message, ...args) {\n        if (this.shouldLog(LogLevel.DEBUG)) {\n            console.log(...this.formatMessage('DEBUG', message, ...args));\n        }\n    }\n    /**\n     * Special method for performance-sensitive debug logs\n     * These are completely removed in production builds\n     */\n    perfDebug(message, ...args) {\n        if (this.isDevelopment && this.shouldLog(LogLevel.DEBUG)) {\n            console.log(...this.formatMessage('PERF', message, ...args));\n        }\n    }\n    /**\n     * Group logging for complex debug scenarios\n     */\n    group(title, callback) {\n        if (this.shouldLog(LogLevel.DEBUG)) {\n            console.group(this.formatMessage('GROUP', title)[0]);\n            try {\n                callback();\n            }\n            finally {\n                console.groupEnd();\n            }\n        }\n    }\n    /**\n     * Create a child logger with additional context\n     */\n    child(context) {\n        return new Logger({\n            ...this.config,\n            prefix: `${this.config.prefix}[${context}]`\n        });\n    }\n}\n// Export singleton instance\nexport const logger = new Logger();\n// Export factory function for component-specific loggers\nexport const createLogger = (context) => {\n    return logger.child(context);\n};\n","/**\n * UUIDç”Ÿæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n * RFC 4122æº–æ‹ ã®UUID v4ã‚’ç”Ÿæˆã™ã‚‹\n */\n/**\n * ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°: UUIDã‚’ç”Ÿæˆã™ã‚‹\n * @returns RFC 4122æº–æ‹ ã®UUID v4æ–‡å­—åˆ—\n */\nexport function generateUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n"],"names":[],"sourceRoot":""}