# =======================================================
# JupyterLab Cell Monitor Extension - 環境変数設定例
# =======================================================
# このファイルをコピーして .env ファイルを作成してください
# cp .env.example .env

# =======================================================
# 🌍 環境設定
# =======================================================
# 実行環境（development, production, test）
NODE_ENV=development

# ホスト設定（Docker内部では自動調整）
HOST_DOMAIN=localhost
# ホストIPアドレス（Docker外部からアクセスする場合は適宜変更
# HOST_DOMAIN=192.168.1.17
HOST_UID=1000
HOST_GID=1000

# =======================================================
# 🐳 Docker コンテナポート設定
# =======================================================
# サービス公開ポート
INSTRUCTOR_DASHBOARD_PORT=3000
JUPYTERLAB_PORT=8888
FASTAPI_PORT=8000
POSTGRES_PORT=5432
INFLUXDB_PORT=8086
REDIS_PORT=6379

# =======================================================
# 🌐 フロントエンド設定 (instructor-dashboard)
# =======================================================
# APIサーバーベースURL（ダッシュボードからのAPI呼び出し用）
REACT_APP_API_BASE_URL=http://localhost:8000/api/v1
# REACT_APP_API_BASE_URL=http://192.168.1.17:8000/api/v1
# WebSocketサーバーURL（リアルタイム通信用）
REACT_APP_WS_URL=ws://localhost:8000
# REACT_APP_WS_URL=ws://192.168.1.17:8000

# デバッグ設定
REACT_APP_DEBUG=true

# =======================================================
# 🚀 FastAPIサーバー設定
# =======================================================
# プロジェクト情報
PROJECT_NAME=Student Progress Tracker API
PROJECT_VERSION=1.0.0
API_V1_STR=/api/v1

# CORS設定（本番環境では制限してください）
BACKEND_CORS_ORIGINS=http://localhost:8888,http://localhost:3000,http://localhost:8888
# BACKEND_CORS_ORIGINS=http://192.168.1.17:8888,http://192.168.1.17:3000,http://jupyterlab:8888

# ログレベル
LOG_LEVEL=INFO
DEBUG=true

# =======================================================
# 🗄️ データベース設定
# =======================================================
# PostgreSQL
POSTGRES_USER=admin
POSTGRES_PASSWORD=secretpassword
POSTGRES_SERVER=postgres
POSTGRES_DB=progress_db

# InfluxDB（時系列データ）
INFLUXDB_SERVER=http://influxdb
# INFLUXDB_SERVER=http://192.168.1.17
INFLUXDB_INIT_USERNAME=admin
INFLUXDB_INIT_PASSWORD=secretpassword
INFLUXDB_INIT_ORG=my-org
INFLUXDB_INIT_BUCKET=progress_bucket
INFLUXDB_INIT_ADMIN_TOKEN=my-super-secret-token

# Redis（メッセージキュー）
REDIS_HOST=redis

# =======================================================
# 🔐 セキュリティ設定
# =======================================================
# JWT認証
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# JupyterLab認証（開発環境用）
JUPYTER_TOKEN=

# セキュリティ警告: 本番環境では以下を必ず変更してください
# SECRET_KEY=$(openssl rand -hex 64)
# POSTGRES_PASSWORD=$(openssl rand -hex 32)
# INFLUXDB_INIT_ADMIN_TOKEN=$(openssl rand -hex 32)
# JUPYTER_TOKEN=$(openssl rand -hex 16)

# =======================================================
# 🧪 JupyterLab拡張機能設定
# =======================================================
# セル実行データ送信先URL
CELL_MONITOR_SERVER_URL=http://localhost:8000/api/v1/events
# CELL_MONITOR_SERVER_URL=http://,192.168.1.17:8000/api/v1/events
# 学生識別設定（デフォルト値）
CELL_MONITOR_DEFAULT_EMAIL=student001@example.com
CELL_MONITOR_DEFAULT_TEAM=チームA
CELL_MONITOR_DEFAULT_USER=テスト学生001

# テストモード
CELL_MONITOR_TEST_MODE=true

# CSP（Content Security Policy）設定
CSP_FASTAPI_HOSTS=localhost:8000,127.0.0.1:8000
# CSP_FASTAPI_HOSTS=localhost:8000,192.168.1.17:8000,127.0.0.1:8000

# テスト環境設定
FASTAPI_URL=http://localhost:8000/api/v1/events
# FASTAPI_URL=http://192.168.1.17:8000/api/v1/events
JUPYTERLAB_URL=http://localhost:8888
# JUPYTERLAB_URL=http://192.168.1.17:8888
HEALTH_CHECK_TIMEOUT=60s

# =======================================================
# 🔧 Docker Build設定
# =======================================================
# Pythonバージョン
PYTHON_VERSION=3.12-slim

# Nodeバージョン
NODE_VERSION=18-alpine
NODE_MAJOR_VERSION=20

# JupyterLabバージョン（拡張機能ビルド用）
JUPYTERLAB_VERSION=4.0

# PostgreSQL バージョン
POSTGRES_VERSION=16-alpine

# Redis バージョン
REDIS_VERSION=7-alpine

# InfluxDB バージョン
INFLUXDB_VERSION=2.7

# =======================================================
# 🌟 本番環境用設定例（コメントアウト）
# =======================================================
# 本番環境では以下の設定を有効にしてください

# # 環境
# NODE_ENV=production
# HOST_DOMAIN=your-domain.com

# # フロントエンド（本番ドメイン）
# REACT_APP_API_BASE_URL=https://api.your-domain.com/api/v1
# REACT_APP_WS_URL=wss://api.your-domain.com
# REACT_APP_DEBUG=false

# # セキュリティ強化
# SECRET_KEY=$(openssl rand -hex 64)
# POSTGRES_PASSWORD=$(openssl rand -hex 32)
# INFLUXDB_INIT_ADMIN_TOKEN=$(openssl rand -hex 32)
# JUPYTER_TOKEN=$(openssl rand -hex 16)

# # CORS制限
# BACKEND_CORS_ORIGINS=https://dashboard.your-domain.com

# # SSL/TLS設定
# USE_SSL=true
# SSL_CERT_PATH=/etc/ssl/certs/cert.pem
# SSL_KEY_PATH=/etc/ssl/private/key.pem

# =======================================================
# 🔍 監視・ログ設定
# =======================================================
# ログ出力レベル
LOG_FORMAT=json
LOG_ROTATION=daily

# メトリクス収集
ENABLE_METRICS=true
METRICS_PORT=9090

# ヘルスチェック設定
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3