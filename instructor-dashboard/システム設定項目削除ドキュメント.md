# システム設定項目削除・簡素化ドキュメント

**作成日**: 2025-08-31  
**対象**: instructor-dashboard/src/pages/admin/components/SystemSettings.tsx  
**目的**: 本番稼働環境（200名同時利用）に不適切な設定項目の削除と簡素化  

## 📋 削除された設定項目と理由

### ❌ 削除項目一覧

| 設定項目 | 削除理由 | 本番環境への影響 |
|---------|----------|----------------|
| **compressionThreshold** | 差分更新は既に最適化済み（90%圧縮率安定稼働）<br/>開発者向け調整項目で一般ユーザーには不適切 | パフォーマンス悪化リスク |
| **batchSize** | 6,999+イベント/秒処理で最適値確定済み<br/>変更により処理性能が大幅悪化する可能性 | システム不安定化リスク |
| **refreshInterval** | 実装で使用されておらず設定変更が無効<br/>3箇所で異なる固定値を使用中 | 混乱を招く偽設定 |
| **smartRefreshEnabled** | 実装されておらず設定保存のみ<br/>スマートリフレッシュは既にデフォルト実装 | 機能しない設定項目 |
| **websocketEnabled** | WebSocketは必須機能で無効化すべきではない<br/>代替としてfallbackモードを新設 | 接続断絶リスク |
| **reconnectAttempts** | WebSocketSingleton.tsで5回固定値使用<br/>ネットワーク設定として調整不適切 | 接続安定性への悪影響 |
| **heartbeatInterval** | WebSocket実装で使用されておらず設定無効<br/>ネットワーク設定として危険 | 偽設定項目 |
| **metricsRetentionDays** | 実装されておらず保存のみ<br/>実際のデータ削除処理が存在しない | 誤解を招く未実装機能 |

## ✅ 維持・新設された設定項目

### 🎯 核心機能設定
- **deltaUpdateEnabled**: 90%データ転送削減の重要機能
- **autoRefreshEnabled**: リアルタイム監視の基本機能

### 🔧 運用支援設定  
- **performanceMonitoringEnabled**: 本番環境でのシステム監視
- **websocketFallbackEnabled**: 新設 - 接続問題時の代替手段

### 🔒 セキュリティ設定
- **adminAccessEnabled**: 管理機能アクセス制御
- **debugModeEnabled**: トラブルシューティング支援

## 📊 Before/After比較

### Before (削除前)
- **設定項目数**: 12項目
- **実際に機能**: 4項目 (33%)
- **複雑度**: 高（技術的詳細設定含む）
- **ユーザビリティ**: 混乱を招く偽設定が多数

### After (削除後)
- **設定項目数**: 6項目
- **実際に機能**: 5項目 (83%) + 1新設
- **複雑度**: 低（運用重視設定のみ）
- **ユーザビリティ**: 明確で実用的

## 🔄 移行作業

### 変更されたファイル
- `instructor-dashboard/src/pages/admin/components/SystemSettings.tsx`

### 後方互換性
- 既存の`systemConfig`LocalStorageは新形式で上書き
- 削除された設定項目は無視（エラーなし）
- デフォルト値での自動復旧

### UI変更
- **2カラムレイアウト維持**: 核心機能 + 運用支援
- **設定説明強化**: 各機能の効果を明記
- **視覚的分類**: カテゴリごとの色分け

## 📝 削除された設定の技術的詳細

### 差分更新関連
```typescript
// 削除: compressionThreshold (0.05-0.5)
// 理由: deltaCalculator.tsで内部最適化済み
// 現在: 固定90%圧縮率で安定稼働

// 削除: batchSize (10-1000)  
// 理由: 並列ワーカーシステムで最適化済み
// 現在: 8ワーカー並列処理で最適バッチサイズ使用
```

### WebSocket関連
```typescript
// 削除: reconnectAttempts (1-10)
// 理由: WebSocketSingleton.ts:27で maxReconnectAttempts = 5 固定

// 削除: heartbeatInterval (ミリ秒)
// 理由: WebSocket実装でハートビート機能未使用

// 削除: websocketEnabled  
// 代替: websocketFallbackEnabled (新設)
// 理由: WebSocket無効化ではなく代替手段提供
```

### リフレッシュ関連
```typescript
// 削除: refreshInterval (1000-60000ms)
// 理由: useProgressDashboard.tsで以下固定値使用:
//   - highFrequencyInterval: 5000ms (展開チーム有り)
//   - lowFrequencyInterval: 15000ms (展開チーム無し)

// 削除: smartRefreshEnabled
// 理由: スマートリフレッシュは既にデフォルト実装済み
```

## 🎯 運用上の利点

1. **設定の明確化**: 機能する設定のみ表示
2. **操作の簡素化**: 6項目に集約で迷いを排除
3. **安定性向上**: 危険な技術設定を削除
4. **保守性向上**: 実装と設定の一致

## ⚠️ 注意事項

- **既存LocalStorage**: 古い設定は自動的に無視される
- **デフォルト値**: 削除された設定は内部最適値を継続使用
- **パフォーマンス**: 削除により設定変更の影響範囲が明確化

## 🚀 今後の方針

1. **設定の実装統一**: 残存設定項目の実装完了
2. **運用フィードバック**: 簡素化後の使用感確認
3. **追加機能検討**: 実運用で必要な設定があれば慎重に追加

---

**更新者**: Claude Code  
**承認**: システム管理者確認必要  
**関連**: instructor-dashboard Phase 1クリーンアップ完了