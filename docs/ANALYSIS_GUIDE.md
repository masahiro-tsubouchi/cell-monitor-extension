# 学習進捗データの分析と可視化ガイド

このドキュメントは、収集した生徒の学習進捗データをどのように分析・可視化し、講師が指導に役立てるかのベストプラクティスをまとめたものです。

## 1. 分析の目的

データ分析の主な目的は、講師が以下の点を迅速に把握できるようにすることです。

- **進捗の遅れ**: カリキュラムについていけていない生徒を特定する。
- **つまずきの発見**: 特定の問題やコンセプトで困難を抱えている生徒や、クラス全体で共通する課題を特定する。
- **ヘルプの必要性**: 積極的に助けを求めていないが、サポートを必要としている可能性のある生徒を見つけ出す。
- **エンゲージメントの確認**: 学習活動への参加度合いを測る。

## 2. 注目すべき主要メトリクス

`StudentProgressData` から得られる情報のうち、特に重要な指標は以下の通りです。

- **セルの実行回数 (`executionCount`)**: 回数が多い場合、生徒が試行錯誤している、または正解にたどり着けずに苦労している可能性を示唆します。
- **エラーの発生 (`hasError`, `errorMessage`)**: 特定のセルで頻繁にエラーが発生している場合、その箇所の難易度が高いか、説明が不十分である可能性があります。
- **実行時間 (`executionDurationMs`)**: 平均より著しく長い時間をかけている場合、内容の理解に苦しんでいる可能性があります。
- **最後の実行セル (`cellIndex`)**: 生徒が現在どこまで進んでいるかを直接的に示します。
- **イベントの時系列 (`eventTime`)**: 学習のペースや、非アクティブな時間（離脱の可能性）を把握するのに役立ちます。

## 3. 分析手法：要サポート生徒の特定パターン

収集したデータを基に、以下のようなパターンで支援が必要な生徒を特定できます。

| パターン                 | 特徴                                                                                                                             | 考えられる状況                                 |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| **試行錯誤型**           | ・特定のセルでの実行回数が非常に多い<br>・エラーと成功を繰り返している                                                              | コンセプトの理解が不十分で、手探りで進めている |
| **エラー頻発型**         | ・特定のセルでエラーが継続的に発生<br>・エラーメッセージが類似している                                                              | 文法ミスや特定の関数・ライブラリの誤用         |
| **停滞型**               | ・長時間、同じセルから進捗がない<br>・ノートブックは開いているが、実行イベントが発生しない                                                | 問題が解けずに完全に手が止まっている           |
| **迷子型**               | ・セルの実行順序がカリキュラムの想定と大きく異なる<br>・ノートブック内を頻繁に行き来している                                            | 学習の流れを見失っている                       |
| **低エンゲージメント型** | ・ノートブックを開いてからの実行イベントが極端に少ない<br>・セッション時間が短い                                                    | 学習意欲が低下しているか、環境に問題がある     |

## 4. 可視化のベストプラクティス

分析結果を講師が直感的に理解できるよう、以下のようなダッシュボードを構築することを推奨します。

### 4.1. クラス全体の進捗一覧ダッシュボード

講師が最初に確認する画面です。生徒全員の状況を俯瞰できるようにします。

- **表示項目**: 生徒名、進捗率（完了セル数/全セル数）、最終アクティビティ時刻、現在のステータス
- **ステータス**: 上記の分析パターンに基づき、「順調」「要観察（試行錯誤中）」「要介入（停滞中）」などを自動判定して表示します。
- **工夫**: ステータスを色分け（緑:順調, 黄:要観察, 赤:要介入）することで、優先的に確認すべき生徒が一目でわかります。

### 4.2. 個別生徒の詳細ビュー

クラス一覧から特定の生徒を選択した際のドリルダウン画面です。

- **ノートブックの再現**: ノートブックのセルを一覧表示し、各セルの背景色をステータス（成功、エラー、未実行）で色分けします。
- **詳細メトリクスの表示**: 各セルにマウスオーバーすると、実行回数、総実行時間、エラー履歴などの詳細情報をポップアップで表示します。
- **行動タイムライン**: 生徒のイベント（ノートブックを開く、セル実行、エラー発生など）を時系列で表示し、学習プロセスを再現できるようにします。

### 4.3. 課題ホットスポット分析

特定のノートブックに対して、クラス全体でつまずきが多い箇所を可視化します。

- **表示方法**: ノートブックのセル一覧に対して、エラー発生率や平均実行回数をヒートマップのように表示します。
- **活用方法**: 赤く表示される（＝つまずきが多い）セルは、教材自体の改善点や、次回の授業で重点的に解説すべきポイントとして活用できます。

## 5. 実装方針

これらの分析・可視化機能を実現するための実装アプローチです。

1.  **データベースの設計**: `StudentProgressData` を保存するためのテーブルを設計し、FastAPIサーバーにデータベース（例: PostgreSQL）を接続します。
2.  **分析APIの構築 (`fastapi_server`)**:
    - `GET /api/class/summary`: クラス全体の進捗一覧データを返すAPI。
    - `GET /api/student/{user_id}/progress?notebook={path}`: 特定生徒のノートブック進捗詳細を返すAPI。
    - `GET /api/notebook/{notebook_path}/hotspots`: 課題のホットスポット分析データを返すAPI。
3.  **講師用ダッシュボードの構築**:
    - FastAPIサーバーとは別に、ReactやVue.jsなど用いて新しいフロントエンドアプリケーションとして構築します。
    - `Chart.js` や `D3.js` などのライブラリを活用して、上記の可視化を実装します。
    - このダッシュボードが、上記で作成した分析APIを呼び出してデータを表示します。
